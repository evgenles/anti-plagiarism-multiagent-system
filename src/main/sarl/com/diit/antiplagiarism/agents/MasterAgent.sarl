/** 
 * 
 */
package com.diit.antiplagiarism.agents

import io.sarl.core.AgentKilled
import io.sarl.core.AgentSpawned
import io.sarl.core.ContextJoined
import io.sarl.core.ContextLeft
import io.sarl.core.Destroy
import io.sarl.core.Initialize
import io.sarl.core.Logging
import io.sarl.core.MemberJoined
import io.sarl.core.MemberLeft
import com.diit.antiplagiarism.helpers.DomainHelper
import java.util.List
import com.diit.antiplagiarism.events.TaskAddedEvent
import com.diit.antiplagiarism.models.TaskModel

/** 
 * @author evgenles
 * 
 */
agent MasterAgent {
	uses Logging
	
	var tasks : List<TaskModel>

	on Initialize {
		// Event trigger before the agent begin to live or to be used.
		// You should put all the initialization statements in this block of code.
		info("Master started on " + DomainHelper.GetIp)

	}
	on TaskAddedEvent {
	   if(occurrence.url!==null)
	   {
	   	tasks.add(new TaskModel(occurrence.url.split("/").last, occurrence.url))
	   	
	   }
	}

	on Destroy {
		// Event trigger when the agent is destroyed from the system.
		// You should put all the resource releasing statements in this block of code.
		info("The agent was stopped.")
	}

	on AgentSpawned {
		// A new agent has been spawned in our context.
	}

	on AgentKilled {
		// A new agent has been killed in our context.
	}

	on ContextJoined {
		 if(!occurrence.fromMe) info("Joined: " + occurrence.class + " Address: "+ occurrence.source)
		// Event trigger when an agent of the level joins a shared context.
		// Sent to a agent of the same level.
	}

	on ContextLeft {
		if(!occurrence.fromMe) info("Left: " + occurrence.class + " Address: " + occurrence.source)
		
		// Event trigger when an agent of the level jleaves a shared context.
		// Sent to a agent of the same level.
	}

	on MemberJoined {
		// Event trigger when an agent joins one of our shared super-holons.
		// Sent to all members of the considered super-holon.
	}

	on MemberLeft {
		// Event trigger when an agent leaves one of our shared super-holons.
		// Sent to all members of the considered super-holon.
	}
}
